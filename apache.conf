<VirtualHost *:80>
    ServerName aiappsy.com
    DocumentRoot /var/www/aiappsy-web-studio
    DirectoryIndex index.html index.htm

    # Security headers
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Referrer-Policy "strict-origin-when-cross-origin"

    # Enable compression
    LoadModule deflate_module
    LoadModule headers_module
    LoadModule filter_module
    SetOutputFilter DEFLATE
    SetOutputFilter COMPRESS
    SetEnvIfNoCaseNoCase Request_URI "\.(gif|jpe?g|png)$" no-gzip dont-vary
    SetEnvIfNoCaseNoCase Request_URI ".*/.*" no-gzip dont-vary
    AddOutputFilterByType DEFLATE text/plain text/css text/xml text/javascript application/javascript application/xml+rss application/json
    AddOutputFilterByType COMPRESS .gif?g .jpe?g .png

    # Proxy to Next.js app
    ProxyPreserveHost On
    ProxyPass / http://localhost:3000/
    ProxyPassReverse / http://localhost:3000/
</VirtualHost>